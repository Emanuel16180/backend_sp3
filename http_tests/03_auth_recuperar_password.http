### â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
### ğŸ”‘ FLUJO: RECUPERACIÃ“N DE CONTRASEÃ‘A
### Archivo: 03_auth_recuperar_password.http
### Endpoints: /api/auth/password-reset/, /api/auth/password-reset-confirm/
### â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

@baseUrl = http://bienestar.localhost:8000

### â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
### 1ï¸âƒ£ SOLICITAR RESET DE CONTRASEÃ‘A
### POST /api/auth/password-reset/
### EnvÃ­a email con link de recuperaciÃ³n
### â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
POST {{baseUrl}}/api/auth/password-reset/
Content-Type: application/json

{
  "email": "juan.perez@example.com"
}

### â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
### 2ï¸âƒ£ CONFIRMAR NUEVA CONTRASEÃ‘A
### POST /api/auth/password-reset-confirm/
### 
### âš ï¸ IMPORTANTE: Necesitas el uid y token del email
### El email contiene un link como:
### https://frontend.com/reset-password?uid=MQ&token=abc123-xyz789
### â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
POST {{baseUrl}}/api/auth/password-reset-confirm/
Content-Type: application/json

{
  "uid": "MQ",
  "token": "c9p6sm-8f9a7b6c5d4e3f2a1b0c9d8e7f6a5b4c",
  "new_password": "NuevaPassword123!",
  "new_password_confirm": "NuevaPassword123!"
}

### â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
### 3ï¸âƒ£ CAMBIAR CONTRASEÃ‘A (USUARIO AUTENTICADO)
### POST /api/auth/change-password/
### Requiere estar logueado
### â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# @name login
POST {{baseUrl}}/api/auth/login/
Content-Type: application/json

{
  "email": "juan.perez@example.com",
  "password": "demo123"
}

###
@authToken = {{login.response.body.token}}

###
POST {{baseUrl}}/api/auth/change-password/
Authorization: Token {{authToken}}
Content-Type: application/json

{
  "current_password": "demo123",
  "new_password": "NuevoPassword123!",
  "new_password_confirm": "NuevoPassword123!"
}

### â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
### 4ï¸âƒ£ VERIFICAR LOGIN CON NUEVA CONTRASEÃ‘A
### POST /api/auth/login/
### â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
POST {{baseUrl}}/api/auth/login/
Content-Type: application/json

{
  "email": "juan.perez@example.com",
  "password": "NuevoPassword123!"
}

### â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
### âŒ CASOS DE ERROR COMUNES
### â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

### ERROR: Email no existe
POST {{baseUrl}}/api/auth/password-reset/
Content-Type: application/json

{
  "email": "noexiste@example.com"
}

###

### ERROR: ContraseÃ±as no coinciden (change-password)
POST {{baseUrl}}/api/auth/change-password/
Authorization: Token {{authToken}}
Content-Type: application/json

{
  "current_password": "demo123",
  "new_password": "Password123!",
  "new_password_confirm": "Password456!"
}

###

### ERROR: ContraseÃ±a actual incorrecta
POST {{baseUrl}}/api/auth/change-password/
Authorization: Token {{authToken}}
Content-Type: application/json

{
  "current_password": "password_incorrecta",
  "new_password": "NewPassword123!",
  "new_password_confirm": "NewPassword123!"
}

###

### ERROR: Token invÃ¡lido o expirado (reset-confirm)
POST {{baseUrl}}/api/auth/password-reset-confirm/
Content-Type: application/json

{
  "uid": "MQ",
  "token": "token-invalido-o-expirado",
  "new_password": "Password123!",
  "new_password_confirm": "Password123!"
}

###

### â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
### ğŸ“Š RESPUESTAS ESPERADAS
### â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
###
### âœ… SOLICITUD RESET EXITOSA (200 OK):
### {
###   "message": "Si el correo estÃ¡ registrado, recibirÃ¡s instrucciones en breve."
### }
###
### âœ… RESET CONFIRMADO (200 OK):
### {
###   "message": "ContraseÃ±a restablecida exitosamente"
### }
###
### âœ… CAMBIO DE CONTRASEÃ‘A EXITOSO (200 OK):
### {
###   "message": "ContraseÃ±a cambiada exitosamente",
###   "token": "nuevo_token_abc123..."
### }
###
### âŒ ERROR EMAIL NO EXISTE (400 Bad Request):
### {
###   "email": ["No existe un usuario con este email"]
### }
###
### âŒ ERROR TOKEN INVÃLIDO (400 Bad Request):
### {
###   "error": "Token invÃ¡lido"
### }
###
### â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
###
### ğŸ“§ NOTA SOBRE EMAILS:
### Los emails se envÃ­an a: isaelortiz74@gmail.com (configurado en settings)
### En desarrollo, verifica la consola del servidor para ver el contenido del email
###
### â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
