### â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
### ğŸ‘¤ FLUJO: GESTIÃ“N DE PERFIL DEL PACIENTE
### Archivo: 10_paciente_perfil.http
### Endpoints: /api/users/profile/, /api/users/patient-profile/
### â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

@baseUrl = http://bienestar.localhost:8000

### â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
### ğŸ” LOGIN PREVIO (para obtener token)
### â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# @name login
POST {{baseUrl}}/api/auth/login/
Content-Type: application/json

{
  "email": "juan.perez@example.com",
  "password": "demo123"
}

###
@authToken = {{login.response.body.token}}

### â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
### 1ï¸âƒ£ VER MI PERFIL BÃSICO
### GET /api/users/profile/
### â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
GET {{baseUrl}}/api/users/profile/
Authorization: Token {{authToken}}

### â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
### 2ï¸âƒ£ ACTUALIZAR MI PERFIL BÃSICO
### PATCH /api/users/profile/
### â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
PATCH {{baseUrl}}/api/users/profile/
Authorization: Token {{authToken}}
Content-Type: application/json

{
  "first_name": "Juan Carlos",
  "last_name": "PÃ©rez GÃ³mez",
  "phone": "70987654",
  "address": "Av. 6 de Agosto #456, La Paz",
  "gender": "M"
}

### â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
### 3ï¸âƒ£ VER MI PERFIL DE PACIENTE (COMPLETO)
### GET /api/users/patient-profile/
### â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
GET {{baseUrl}}/api/users/patient-profile/
Authorization: Token {{authToken}}

### â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
### 4ï¸âƒ£ COMPLETAR PERFIL DE PACIENTE
### POST /api/users/patient-profile/
### Primera vez que completas el perfil
### â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
POST {{baseUrl}}/api/users/patient-profile/
Authorization: Token {{authToken}}
Content-Type: application/json

{
  "emergency_contact_name": "MarÃ­a PÃ©rez",
  "emergency_contact_phone": "71234567",
  "emergency_contact_relationship": "Hermana",
  "occupation": "Ingeniero de Software",
  "education_level": "universitario",
  "initial_reason": "Ansiedad laboral y estrÃ©s",
  "how_found_us": "RecomendaciÃ³n de un amigo"
}

### â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
### 5ï¸âƒ£ ACTUALIZAR PERFIL DE PACIENTE
### PATCH /api/users/patient-profile/
### â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
PATCH {{baseUrl}}/api/users/patient-profile/
Authorization: Token {{authToken}}
Content-Type: application/json

{
  "emergency_contact_phone": "79876543",
  "occupation": "Desarrollador Full Stack",
  "initial_reason": "Manejo de ansiedad y estrÃ©s laboral. Mejora en relaciones interpersonales."
}

### â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
### 6ï¸âƒ£ ACTUALIZAR PERFIL COMPLETO (UN SOLO REQUEST)
### PUT /api/users/complete-profile/
### Actualiza datos bÃ¡sicos y perfil de paciente a la vez
### â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
PUT {{baseUrl}}/api/users/complete-profile/
Authorization: Token {{authToken}}
Content-Type: application/json

{
  "user_data": {
    "first_name": "Juan Carlos",
    "last_name": "PÃ©rez GÃ³mez",
    "phone": "70111222",
    "address": "Calle PotosÃ­ #789, La Paz",
    "date_of_birth": "1990-03-15"
  },
  "patient_data": {
    "emergency_contact_name": "MarÃ­a PÃ©rez LÃ³pez",
    "emergency_contact_phone": "71333444",
    "emergency_contact_relationship": "Hermana",
    "occupation": "Ingeniero de Software Senior",
    "education_level": "postgrado",
    "initial_reason": "BÃºsqueda de equilibrio emocional y manejo del estrÃ©s",
    "how_found_us": "BÃºsqueda en Google"
  }
}

### â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
### 7ï¸âƒ£ SUBIR FOTO DE PERFIL
### PATCH /api/users/profile/
### âš ï¸ Requiere multipart/form-data
### â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
PATCH {{baseUrl}}/api/users/profile/
Authorization: Token {{authToken}}
Content-Type: multipart/form-data; boundary=----WebKitFormBoundary

------WebKitFormBoundary
Content-Disposition: form-data; name="profile_picture"; filename="perfil.jpg"
Content-Type: image/jpeg

< ./test_files/perfil.jpg
------WebKitFormBoundary--

### â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
### âŒ CASOS DE ERROR COMUNES
### â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

### ERROR: Acceso sin autenticaciÃ³n
GET {{baseUrl}}/api/users/profile/

###

### ERROR: TelÃ©fono con formato invÃ¡lido
PATCH {{baseUrl}}/api/users/profile/
Authorization: Token {{authToken}}
Content-Type: application/json

{
  "phone": "123"
}

###

### ERROR: Fecha de nacimiento invÃ¡lida (menor de 5 aÃ±os)
PATCH {{baseUrl}}/api/users/profile/
Authorization: Token {{authToken}}
Content-Type: application/json

{
  "date_of_birth": "2023-01-01"
}

###

### â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
### ğŸ“Š RESPUESTAS ESPERADAS
### â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
###
### âœ… VER PERFIL EXITOSO (200 OK):
### {
###   "id": 5,
###   "email": "juan.perez@example.com",
###   "username": "juan.perez",
###   "first_name": "Juan",
###   "last_name": "Perez",
###   "ci": "1234567",
###   "phone": "7012345",
###   "gender": "M",
###   "address": "Av. Arce #123",
###   "date_of_birth": "1990-03-15",
###   "age": 35,
###   "user_type": "patient",
###   "is_verified": false,
###   "profile_picture": "/media/profile_pictures/perfil.jpg"
### }
###
### âœ… VER PERFIL PACIENTE EXITOSO (200 OK):
### {
###   "user": {
###     "id": 5,
###     "email": "juan.perez@example.com",
###     "first_name": "Juan",
###     "last_name": "Perez"
###   },
###   "emergency_contact_name": "MarÃ­a PÃ©rez",
###   "emergency_contact_phone": "71234567",
###   "emergency_contact_relationship": "Hermana",
###   "occupation": "Ingeniero de Software",
###   "education_level": "universitario",
###   "initial_reason": "Ansiedad laboral",
###   "how_found_us": "RecomendaciÃ³n",
###   "profile_completed": true
### }
###
### âŒ ERROR SIN AUTENTICACIÃ“N (401 Unauthorized):
### {
###   "detail": "Las credenciales de autenticaciÃ³n no se proveyeron."
### }
###
### â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
